@using HaarlemFestival.Models;
@model EventList
@{
    ViewBag.Title = "Manage";
}
<div class="container body-content">
    <script type="text/javascript">

        function SelectedEventChanged()
        {
            $('.eventData').each(function ()
            {
                $(this).hide();
            })

            $('.eventFilter').each(function ()
            {
                $(this).hide();
            })

            switch ($('#selectedEvent').val())
            {
                case "Jazz@Patronaat":
                    $('#jazzEvents').show();
                    $('#dateFilter').show();
                    break;

                case "DinnerInHaarlem":
                    $('#dinnerEvents').show();
                    $('#cuisineFilter').show();
                    break;

                case "TalkingHaarlem":
                    $('#talkingEvents').show();
                    $('#dateFilter').show();
                    break;

                case "HistoricHaarlem":
                    $('#historicEvents').show();
                    $('#placeholderTable').show();
                    $('#dateFilter').show();
                    $('#guideFilter').show();
                    $('#languageFilter').show();
                    break;
            }
        }

        function FilterData()
        {
            var filters = [];


            // Voor elke filter
            $('.eventFilter').each(function () {

                if ($(this).val() != "") // Als de filter is geselecteerd.
                {
                    filters.push($(this).val()) // Filter toevoegen.
                }
            })


            // TEST: Alle Filters in de console neerzetten.
            console.log(filters);

            // Alle rows van de table vinden.
            var tr = $("#data").find("tr");
            tr.hide(); // Alle rows van de table verbergen.

            // Als er geen filter is geselecteerd.
            if (filters.length == 0)
            {
                tr.show(); // Alle rijen laten zien.
                return; // Uit de functie gaan.
            }

            // Elke rij filteren.
            tr.filter(function ()
            {
                var $t = $(this);
                for (var index = 0; index < filters.length; ++index)
                {

                    if ($t.is(":not(:contains('" + filters[index] + "'))")) // Als de rij niet voldoet aan de filters
                    {
                        return false; // Rij verbergen.
                    }
                }

                return true; // Rij laten zien.
            })
                .show();
        }

    </script>

    <section id="topFilterBar">
        <select id="selectedEvent" name="selectedEvent" onchange="SelectedEventChanged()">
            <option value="">Select an event.</option>
            <option value="Jazz@Patronaat">Jazz@Patronaat</option>
            <option value="DinnerInHaarlem">Dinner in Haarlem</option>
            <option value="TalkingHaarlem">Talking Haarlem</option>
            <option value="HistoricHaarlem">Historic Haarlem</option>
        </select>

        <div id="filterSystem">
            <select id="dateFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Date.</option>
                <option value="Thursday 26-07-2018">Thursday 26-07-2018</option>
                <option value="Friday 27-07-2018">Friday 27-07-2018</option>
                <option value="Saturday 28-07-2018">Saturday 28-07-2018</option>
                <option value="Sunday 29-07-2018">Sunday 29-07-2018</option>
            </select>

            <select id="guideFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Guide.</option>
                <option value="Frederic">Frederic</option>
                <option value="Jan-Willem">Jan-Willem</option>
                <option value="Williams">Williams</option>
                <option value="Annet">Annet</option>
                <option value="Kim">Kim</option>
            </select>

            <select id="languageFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Language.</option>
                <option value="English">English</option>
                <option value="Dutch">Dutch</option>
                <option value="Chinese">Chinese</option>
            </select>

            <select id="cuisineFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Cuisine.</option>
                <option value="Argentinian">Argentinian</option>
                <option value="Asian">Asian</option>
                <option value="Dutch">Dutch</option>
                <option value="European">European</option>
                <option value="Fish and seafood">Fish and seafood</option>
                <option value="French">French</option>
                <option value="International">International</option>
                <option value="Modern">Modern</option>
                <option value="Steakhouse">Steakhouse</option>
            </select>
        </div>
    </section>

    <section id="dataTable">
        <table id="placeholderTable" class="eventData table-striped table-responsive">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Language</th>
                    <th>Guide</th>
                    <th>Seats</th>
                    <th>Price</th>
                    <th>Group Ticket</th>
                    <th>Reservation</th>
                </tr>
            </thead>
            <tbody id="data">
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>10:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>10:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>13:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>13:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>16:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>16:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

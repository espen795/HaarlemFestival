@using HaarlemFestival.Models;
@model EventList
@{
    ViewBag.Title = "Manage";
}

<div class="popup">
    <div id="deletePopup">
        @{
            Html.RenderPartial("_deleteConfirmation");
        }
    </div>
</div>

<div class="container body-content">
    <script type="text/javascript">

        jQuery.fn.center = function () {
            this.css("position", "absolute"); // Position: Absolute toevoegen

            // het Item naar het midden van de pagina zetten.
            this.css("top", Math.max(0, (($(window).height() - $(this).outerHeight()) / 2) +
                $(window).scrollTop()) + "px");
            this.css("left", Math.max(0, (($(window).width() - $(this).outerWidth()) / 2) +
                $(window).scrollLeft()) + "px");
            return this;
        }

        function ShowDeletePopup()
        {
            // Popup tonen
            $('.popup').css("z-index", "9999");
            $('.popup').show();
            $('#deletePopup').center(); // DeletePopup naar het midden verplaatsen.
        }

        function HidePopup()
        {
            // Popup verbergen.
            $('.popup').css("z-index", "-10");
            $('.popup').css("display", "none");
        }

        function SelectedEventChanged()
        {
            // Alle Data Tabellen verbergen.
            $('.eventData').each(function ()
            {
                $(this).hide();
            })

            // Alle filters verbergen.
            $('.eventFilter').each(function ()
            {
                $(this).hide();
            })

            // Aan de hand van een evenement de data en filters tonen.
            switch ($('#selectedEvent').val())
            {
                case "Jazz@Patronaat":
                    $('#jazzEvents').show();
                    $('#dateFilter').show();
                    break;

                case "DinnerInHaarlem":
                    $('#dinnerEvents').show();
                    $('#cuisineFilter').show();
                    break;

                case "TalkingHaarlem":
                    $('#talkingEvents').show();
                    $('#dateFilter').show();
                    break;

                case "HistoricHaarlem":
                    $('#historicEvents').show();
                    $('#placeholderTable').show();
                    $('#dateFilter').show();
                    $('#guideFilter').show();
                    $('#languageFilter').show();
                    break;
            }
        }

        // Data uit de tabel filteren.
        function FilterData()
        {
            var filters = [];


            // Voor elke filter
            $('.eventFilter').each(function () {

                if ($(this).val() != "") // Als de filter is geselecteerd.
                {
                    filters.push($(this).val()) // Filter toevoegen.
                }
            })


            // TEST: Alle Filters in de console neerzetten.
            console.log(filters);

            // Alle rows van de table vinden.
            var tr = $("#data").find("tr");
            tr.hide(); // Alle rows van de table verbergen.

            // Als er geen filter is geselecteerd.
            if (filters.length == 0)
            {
                tr.show(); // Alle rijen laten zien.
                return; // Uit de functie gaan.
            }

            // Elke rij filteren.
            tr.filter(function ()
            {
                var $t = $(this);
                for (var index = 0; index < filters.length; ++index)
                {

                    if ($t.is(":not(:contains('" + filters[index] + "'))")) // Als de rij niet voldoet aan de filters
                    {
                        return false; // Rij verbergen.
                    }
                }

                return true; // Rij laten zien.
            })
                .show();
        }

    </script>

    <section id="topFilterBar">
        <select id="selectedEvent" name="selectedEvent" onchange="SelectedEventChanged()">
            <option value="">Select an event.</option>
            <option value="Jazz@Patronaat">Jazz@Patronaat</option>
            <option value="DinnerInHaarlem">Dinner in Haarlem</option>
            <option value="TalkingHaarlem">Talking Haarlem</option>
            <option value="HistoricHaarlem">Historic Haarlem</option>
        </select>

        <div id="filterSystem">
            <select id="dateFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Date.</option>
                <option value="Thursday 26-07-2018">Thursday 26-07-2018</option>
                <option value="Friday 27-07-2018">Friday 27-07-2018</option>
                <option value="Saturday 28-07-2018">Saturday 28-07-2018</option>
                <option value="Sunday 29-07-2018">Sunday 29-07-2018</option>
            </select>

            <select id="guideFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Guide.</option>
                <option value="Frederic">Frederic</option>
                <option value="Jan-Willem">Jan-Willem</option>
                <option value="Williams">Williams</option>
                <option value="Annet">Annet</option>
                <option value="Kim">Kim</option>
            </select>

            <select id="languageFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Language.</option>
                <option value="English">English</option>
                <option value="Dutch">Dutch</option>
                <option value="Chinese">Chinese</option>
            </select>

            <select id="cuisineFilter" class="eventFilter" onchange="FilterData()">
                <option value="">Select a Cuisine.</option>
                <option value="Argentinian">Argentinian</option>
                <option value="Asian">Asian</option>
                <option value="Dutch">Dutch</option>
                <option value="European">European</option>
                <option value="Fish and seafood">Fish and seafood</option>
                <option value="French">French</option>
                <option value="International">International</option>
                <option value="Modern">Modern</option>
                <option value="Steakhouse">Steakhouse</option>
            </select>
        </div>
    </section>

    <section class="table-responsive">
        <table id="placeholderTable" class="eventData table table-striped table-responsive">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Start Location</th>
                    <th>Language</th>
                    <th>Guide</th>
                    <th>Seats</th>
                    <th>Price</th>
                    <th>Group Ticket</th>
                    <th>Reservation</th>
                </tr>
            </thead>
            <tbody id="data">
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>10:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 1 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>10:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 2 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>13:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 3 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>13:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 4 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>16:00</td>
                    <td>Bavo</td>
                    <td>English</td>
                    <td>Frederic</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 5 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
                <tr>
                    <td>Thursday 26-07-2018</td>
                    <td>16:00</td>
                    <td>Bavo</td>
                    <td>Dutch</td>
                    <td>Jan-Willem</td>
                    <td>12</td>
                    <td>17.50</td>
                    <td>60.00</td>
                    <td>Mandatory</td>
                    <td>@Html.ActionLink("Edit", "_updateEvent", "Admin", new { eventId = 6 }, null)</td>
                    <td onclick="ShowDeletePopup()">Delete</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>

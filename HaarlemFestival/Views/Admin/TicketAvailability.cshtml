@using HaarlemFestival.Models
@using System.Text.RegularExpressions
@model List<Activity>

<div class="container">

    @foreach (Jazz activity in Model.OfType<Jazz>())
    {
        decimal boughtPercentage = Math.Round((decimal)activity.BoughtTickets,2) / Math.Round((decimal)activity.TotalTickets,2) * 100;
        boughtPercentage = Math.Floor(boughtPercentage);

        <div class="col-md-12" id="@activity.ActivityId">
            <div class="row">
                <div class="col-sm-6">
                    <h3>@activity.artist.ArtistName</h3>
                    <br />
                    <strong>Date: </strong> @activity.StartSession.ToString("dddd dd-MM-yyyy H:mm") - @activity.EndSession.ToString("H:mm")
                    <br />
                    <strong>Description: </strong> @Regex.Replace(activity.artist.ArtistInformation, @"<(.|\n)*?>", string.Empty)
                    <br />
                    <strong>Location: </strong> @activity.ConcertLocation
                    <br />
                    <strong>Hall: </strong> @activity.ConcertHall
                    <br />
                    <strong>Price: </strong>@activity.Price
                </div>
                <div class="col-sm-6"><img src="../images/Jazz/Artiesten/@activity.artist.ArtistImage" style="max-width:100%" onError="this.src = '../images/no_image.jpg'" /></div>
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:@(boughtPercentage)%">
                    Bought Tickets: @activity.BoughtTickets
                </div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:@(100 - boughtPercentage)%">
                    Available Tickets: @(activity.TotalTickets - activity.BoughtTickets)
                </div>
            </div>
        </div>
        <hr />
    }

    @foreach (Dinner activity in Model.OfType<Dinner>())
    {
        decimal boughtPercentage = Math.Round((decimal)activity.BoughtTickets, 2) / Math.Round((decimal)activity.TotalTickets, 2) * 100;
        boughtPercentage = Math.Floor(boughtPercentage);

        <div class="col-md-12" id="@activity.ActivityId">
            <div class="row">
                <div class="col-sm-6">
                    <h3>@activity.Restaurant.Naam</h3>
                    <br />
                    <strong>Description: </strong>@activity.Restaurant.Description
                    <br />
                    <strong>Date: </strong>@activity.Day.Date.ToString("dddd dd-MM-yyyy")
                    <br />
                    <strong>Session: </strong>@activity.StartSession.ToString("H:mm") - @activity.EndSession.ToString("H:mm")
                    <br />
                    <strong>Price:</strong>€ @String.Format("{0:0.00}", activity.Price)
                    <br />
                    <strong>Children Price:</strong>€ @String.Format("{0:0.00}", activity.AlternativePrice)
                </div>
                <div class="col-sm-6"><img src="../images/Dinner/restaurants/@activity.Restaurant.LocationIMG" style="max-width:100%" onError="this.src = '../images/no_image.jpg'" /></div>
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:@(boughtPercentage)%">
                    Bought Seats: @activity.BoughtTickets
                </div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:@(100 - boughtPercentage)%">
                    Available Seats: @(activity.TotalTickets - activity.BoughtTickets)
                </div>
            </div>
        </div>
    }

    @foreach (Talking activity in Model.OfType<Talking>())
    {
        decimal boughtPercentage = Math.Round((decimal)activity.BoughtTickets, 2) / Math.Round((decimal)activity.TotalTickets, 2) * 100;
        boughtPercentage = Math.Floor(boughtPercentage);

        <div class="col-md-12" id="@activity.ActivityId">
            <div class="row">
                <div class="col-sm-6">
                    <h3>@activity.Talk.Naam</h3>
                    <br />
                    <strong>Participants: </strong>@activity.Talk.Person1 and @activity.Talk.Person2
                    <br />
                    <strong>Description: </strong>@activity.Talk.Description
                    <br />
                    <strong>Date: </strong>@activity.StartSession.ToString("dddd dd-MM-yyyy H:mm") - @activity.EndSession.ToString("H:mm")
                    <br />
                    <strong>Price: </strong>€ @String.Format("{0:0.00}", activity.Price)
                    <br />
                </div>
                <div class="col-sm-3"><img src="../images/Talking/@activity.Talk.Person1IMG" style="max-width:100%" onError="this.src = '../images/no_image.jpg'" /></div>
                <div class="col-sm-3"><img src="../images/Talking/@activity.Talk.Person2IMG" style="max-width:100%" onError="this.src = '../images/no_image.jpg'" /></div>
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:@(boughtPercentage)%">
                    Bought Tickets: @activity.BoughtTickets
                </div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:@(100 - boughtPercentage)%">
                    Available Tickets: @(activity.TotalTickets - activity.BoughtTickets)
                </div>
            </div>
        </div>
    }

    @foreach (Historic activity in Model.OfType<Historic>())
    {
        decimal boughtPercentage = Math.Round((decimal)activity.BoughtTickets, 2) / Math.Round((decimal)activity.TotalTickets, 2) * 100;
        boughtPercentage = Math.Floor(boughtPercentage);

        <div class="col-md-12" id="@activity.ActivityId">
            <div class="row">
                <div class="col-sm-12">
                    <h3><strong>Tour Date: </strong>@activity.StartSession.ToString("dddd dd-MM-yyyy H:mm") - @activity.EndSession.ToString("H:mm")</h3>
                    <br />
                    <strong>Startlocation: </strong>@activity.Address
                    <br />
                    <strong>Guide: </strong>@activity.Guide.GuideName
                    <br />
                    <strong>Language: </strong>@activity.Guide.LanguageName (@activity.Guide.LanguageAbbr)
                    <br />
                    <strong>Price: </strong>€ @String.Format("{0:0.00}", activity.Price)
                    <br />
                    <strong>Group Price (Atleast 4 people): </strong>€ @String.Format("{0:0.00}", activity.AlternativePrice)
                </div>
            </div>
            <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:@(boughtPercentage)%">
                    Bought Seats: @activity.BoughtTickets
                </div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:@(100 - boughtPercentage)%">
                    Available Seats: @(activity.TotalTickets - activity.BoughtTickets)
                </div>
            </div>
        </div>
    }

</div>